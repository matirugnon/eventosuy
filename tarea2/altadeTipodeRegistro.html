<!DOCTYPE html>
<html lang = "es">
<head>
<meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Alta de Tipo de Registro · eventos.uy</title>
 <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet"/>
</head>
<body>
	<header class="header">
  	<h1>eventos.uy</h1>
  	<nav>
    	<ul class="nav-links">
     	 	<li><a href="index.html">Inicio</a></li>
      		<li><a href="#">Eventos</a></li>
      		<li><a href="#">Categorías</a></li>
    	</ul>
  	</nav>
  	<div>
    	<a href="iniciodesesion.html" class="btn-primary">Iniciar sesión</a>
    	<a href="altausuario.html" class="btn-primary">Registrarse</a>
      <a href="listarUsuarios.html" class="btn-primary">Usuario</a>
 		</div>
 	</header>
 	<div class="content single">
  		<main>
   			<section class="auth-container">
    		 <div class="auth-card">
        		<h2>Alta de Tipo de Registro</h2>

       			 <form id="formTipoRegistro" class="auth-form" novalidate>
          			<!-- Aquí irán los campos -->
       		 	</form>
     		 </div>
    		</section>
  		</main>
	</div>
 	<label class="form-group">
  <span class="label-text">Edición *</span>
  <select name="edicion" required>
    <option value="">Seleccionar edición…</option>
    <option value="rock2024">Concierto Rock 2024</option>
    <option value="maraton2024">Maratón 2024</option>
    <option value="teatro2024">Teatro 2024</option>
  </select>
	</label>
	
	<label class="form-group">
  		<span class="label-text">Nombre del tipo de registro *</span>
  		<input name="nombre" required maxlength="60" placeholder="Nombre único"/>
	</label>
	
	<label class="form-group">
  		<span class="label-text">Descripción *</span>
  		<textarea name="descripcion" required rows="3" maxlength="300" placeholder="Descripción del tipo de registro…"></textarea>
	</label>
	
	<div class="grid-2">
  <label class="form-group">
    <span class="label-text">Costo (UYU) *</span>
    <input name="costo" type="number" min="0" step="0.01" required placeholder="0.00"/>
  </label>
  
  <label class="form-group">
    <span class="label-text">Cupo *</span>
    <input name="cupo" type="number" min="1" step="1" required placeholder="Ej. 100"/>
  </label>
</div>

<div id="msg" style="color:#c00; margin-top:.5rem; min-height:1.5rem;"></div>

	<button type="submit" class="btn-primary" style="margin-top:1rem; width:100%;">Crear tipo de registro</button>
	<div style="text-align:center; margin-top:.5rem;">
  	<a class="btn-outline" href="index.html">Cancelar</a>
</div>

<script>
  (function () {
    const form = document.getElementById('formTipoRegistro');
    const msg = document.getElementById('msg');

    const registrosExistentes = {
      rock2024: ['general', 'vip'],
      maraton2024: ['participante', 'premium'],
      teatro2024: ['platea', 'palco']
    };

    function validarNombreUnico() {
      const edicion = form.elements['edicion'].value;
      const nombre = form.elements['nombre'].value.trim().toLowerCase();
      const existentes = registrosExistentes[edicion] || [];
      return !existentes.includes(nombre);
    }

    function validarFormulario() {
      msg.textContent = '';
      if (!form.reportValidity()) return false;

      if (!validarNombreUnico()) {
        msg.textContent = '⚠️ Ya existe un tipo de registro con ese nombre para esta edición.';
        return false;
      }

      return true;
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      if (!validarFormulario()) return;

      msg.style.color = '#2a7f2e';
      msg.textContent = '✅ Tipo de registro creado correctamente (simulado).';
      setTimeout(() => window.location.href = 'index.html', 1200);
    });
  })();
</script>

	
	
 	


</body>
</html>