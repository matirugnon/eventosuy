<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalle de Evento · eventos.uy</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
</head>
<body>
  <header class="header">
    <h1><a href="index.html" style="color: inherit; text-decoration: none;">eventos.uy</a></h1>
  </header>
  <div class="content">
      <aside class="sidebar">
        <div class="panel-header">Categorías</div>
       <ul class="menu-list">
            <li><a href="#">Tecnología</a></li>
            <li><a href="#">Innovación</a></li>
            <li><a href="#">Literatura</a></li>
            <li><a href="#">Cultura</a></li>
            <li><a href="#">Música</a></li>
            <li><a href="#">Deporte</a></li>
            <li><a href="#">Salud</a></li>
            <li><a href="#">Entretenimiento</a></li>
            <li><a href="#">Agro</a></li>
            <li><a href="#">Negocios</a></li>
        </ul>
      </aside>

      <main>
        <section class="panel">
          <div class="panel-body">

          <div class="event-detail">
            <article class="event-item" id="evento-detalle" style="border-bottom:0;"></article>
            <div>
              <div class="panel-header" style="border-radius:10px 10px 0 0;">Ediciones</div>
              <div class="panel-body event-editions" id="ediciones-detalle"></div>
            </div>
          </div>
          </div>
        </section>
      </main>
    </div>
    <footer></footer>
  <script>
    // Obtener parámetros de la URL
    function getParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }
    // Leer datos del evento desde los parámetros de la URL
    const titulo = getParam('titulo') || '';
    const fecha = getParam('fecha') || '';
    const lugar = getParam('lugar') || '';
    const descripcion = getParam('descripcion') || '';
    const imagen = getParam('imagen') || '';
    // Render evento principal
    const card = document.getElementById('evento-detalle');
    card.innerHTML = `
      <img class="event-thumb" src="${imagen}" alt="${titulo}" />
      <div>
        <h2 style="margin:0 0 0.5rem 0;font-size:2.2rem;color:#182080;font-family:'Inter',sans-serif;">${titulo}</h2>
        <p style="margin:0.25rem 0;"><strong>Descripción:</strong> ${descripcion}</p>
        <p style="margin:0.25rem 0;"><strong>Sigla:</strong> CR2025</p>
        <p style="margin:0.25rem 0;"><strong>Categorías:</strong> Entretenimiento</p>
        <p style="margin:0.25rem 0;"><strong>Fecha Alta:</strong> ${fecha}</p>
      </div>
    `;

    const ediDiv = document.getElementById('ediciones-detalle');

    fetch("ediciones.json")
      .then(res => res.json())
      .then(data => {
        // filtrar solo las ediciones del evento actual
        const ediciones = data.ediciones.filter(e => e.evento === titulo);

        ediDiv.innerHTML = ediciones.map(e => `
          <a class="mini-card" href="consultaEdicion.html?id=${e.id}">
            <img src="${e.img}" alt="${e.nombre}" />
            <div class="mini-card-title">${e.nombre}</div>
          </a>
        `).join('');
      });

    // Agregar evento click para cada edición
    ediciones.forEach((e, idx) => {
      const a = document.getElementById(`edicion-${idx}`);
      if (a) {
        a.onclick = function(ev) {
          ev.preventDefault();
          const params = new URLSearchParams({
            nombre: e.nombre,
            img: e.img,
            fecha: e.fecha,
            lugar: e.lugar,
            descripcion: e.descripcion,
            evento: e.evento
          }).toString();
          window.location.href = `consultaEdicion.html?${params}`;
        };
      }
    });
  </script>
</body>
</html>
